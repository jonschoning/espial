import{a as It}from"../chunk-HXAV7WCB.js";import{$ as Ut,A as Le,Aa as Pe,B as oe,Ba as Fe,C as ae,Ca as Ie,Da as Be,Ea as Qe,H as ht,J as s,K as wt,L as N,M as p,N as Te,Q as xt,S as ie,T as Ee,U as kt,V as P,W as L,X as ve,Y as De,_ as ye,a as _t,c as A,ca as Ce,d as pe,e as st,ea as he,f as ft,g as dt,ga as _e,i,ia as a,j as Ht,k as pt,ka as we,l as gt,la as xe,m as Et,ma as Nt,n as vt,na as ke,p as S,pa as Ae,q as Dt,qa as F,r as yt,ra as Bt,s as bt,sa as I,t as Me,ta as Qt,u as te,ua as Wt,v as ne,va as Se,w as re,wa as Ot,x as c,xa as b,y as Ct,ya as Gt,z as y,za as Ne}from"../chunk-YZW7HJVL.js";import{$ as v,$a as K,A as V,Ab as Z,B as G,Bb as He,C as qe,Cb as ee,Ec as be,F as R,H as Ke,Hc as At,La as j,Lc as le,Mc as St,Na as q,Ob as mt,P as Xe,Rc as Ue,Sa as at,Tb as ct,Wa as it,Y as z,Z as J,_ as k,aa as D,ca as me,db as X,ea as Ye,ha as Ze,ia as ce,jd as Pt,l as w,m as ze,mc as Mt,md as Ft,n as Je,o as O,oa as et,od as Vt,pa as $,q as $e,qc as ge,ra as tt,rb as lt,rc as Lt,s as x,sa as nt,ta as rt,tb as Y,ua as ot,vc as Tt,wb as U,x as je,zb as ut}from"../chunk-C2VZJJ3O.js";var kn=K($),Un=x(te),An=J(z),Sn=Je($e);var Jt=function(t){var e=function(o){return X(1)(kn(function(_){return[p,i(_)]})(Y(`
`)(o)))},u=function(o){return Z(o.created)},Q=function(o){return{notes:o,cur:k.value,deleteAsk:!1,edit:!1}},fe=function(o){return Un(void 0)},de=ee(void 0),n=function(o){return _e(de.userR)+("/notes/"+o)},r=function(o){var _=function(l){return s([L(An(l.id)),a("note w-100 mw7 pa1 mb2"+function(){return l.shared?"":" private"}())])([s([a("display")])([Te([ve(n(l.slug)),a("link f5 lh-title")])([i(function(){var E=U(l.title);return E?"[no title]":l.title}())]),p,s([a("description mt1 mid-gray")])(e(_t(200)(l.text))),Te([a("link f7 dib gray w4"),ie(D(l.created)(j)(u(l))),ve(n(l.slug))])([i(D("\xA0")(q)(u(l)))])])])};return wt(Sn(_)(o.notes))};return re({initialState:w(Q(t)),render:r,eval:ne({handleQuery:c.handleQuery,receive:c.receive,initialize:c.initialize,finalize:c.finalize,handleAction:fe})})};var $t=J(z),In=x(te),Bn=Qt(S),jt=mt(S),H=G(Me),We=Bt(S),M=V(R)(Me),Qn=O(bt),qt=vt(yt(Et)),T=Wt(S),d=ct(Dt(Tt)),Oe=qe(rt),Wn=Ke(nt),On=x(ot),Vn=K($),Gn=Ot()({reflectSymbol:function(){return"markdown"}})(Xe),ue=Ee(gt),Kt=tt(et),B=Ee(pt),se=kt(Ht),Xt=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),Yt=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),Zt=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),en=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),Rn=function(){function t(){}return t.value=new t,t}(),tn=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),nn=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),Ve=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),Ge=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),rn=function(){function t(){}return t.value=new t,t}(),_n=function(t){return I(function(e){return e.note})(function(e){return function(u){return{apiError:e.apiError,deleteAsk:e.deleteAsk,destroyed:e.destroyed,edit:e.edit,edit_note:e.edit_note,note:u}}})(t)},on=_n(Ae),zn=_n(F),Jn=function(){return ze.value}(),un=function(t){return I(function(e){return e.edit_note})(function(e){return function(u){return{apiError:e.apiError,deleteAsk:e.deleteAsk,destroyed:e.destroyed,edit:e.edit,note:e.note,edit_note:u}}})(t)},an=un(F),$n=un(Ae),jn=function(t){return I(function(e){return e.edit})(function(e){return function(u){return{apiError:e.apiError,deleteAsk:e.deleteAsk,destroyed:e.destroyed,edit_note:e.edit_note,note:e.note,edit:u}}})(t)},ln=jn(F),qn=function(t){return I(function(e){return e.apiError})(function(e){return function(u){return{deleteAsk:e.deleteAsk,destroyed:e.destroyed,edit:e.edit,edit_note:e.edit_note,note:e.note,apiError:u}}})(t)},Re=qn(F),sn=function(t){var e=function(n){return $t(n.id)+"_text"},u=function(n){return{note:n,edit_note:n,deleteAsk:!1,edit:n.id<=0,destroyed:!1,apiError:k.value}},Q=ee(void 0),fe=function(n){if(n instanceof Rn)return In(void 0);if(n instanceof tn)return Bn(an)(function(){if(n.value0 instanceof Xt)return function(r){return{id:r.id,slug:r.slug,text:r.text,length:r.length,isMarkdown:r.isMarkdown,shared:r.shared,created:r.created,updated:r.updated,title:n.value0.value0}};if(n.value0 instanceof Yt)return function(r){return{id:r.id,slug:r.slug,title:r.title,length:r.length,isMarkdown:r.isMarkdown,shared:r.shared,created:r.created,updated:r.updated,text:n.value0.value0}};if(n.value0 instanceof Zt)return function(r){return{id:r.id,slug:r.slug,title:r.title,text:r.text,length:r.length,shared:r.shared,created:r.created,updated:r.updated,isMarkdown:n.value0.value0}};if(n.value0 instanceof en)return function(r){return{id:r.id,slug:r.slug,title:r.title,text:r.text,length:r.length,isMarkdown:r.isMarkdown,created:r.created,updated:r.updated,shared:n.value0.value0}};throw new Error("Failed pattern match at Component.NNote (line 194, column 19 - line 198, column 36): "+[n.value0.constructor.name])}());if(n instanceof Ge)return jt(function(r){var o={};for(var _ in r)({}).hasOwnProperty.call(r,_)&&(o[_]=r[_]);return o.deleteAsk=n.value0,o});if(n instanceof rn)return H(We(on))(function(r){return M(Qn(qt(Ft(r.id))))(function(){return jt(function(o){var _={};for(var l in o)({}).hasOwnProperty.call(o,l)&&(_[l]=o[l]);return _.destroyed=!0,_})})});if(n instanceof Ve)return H(We(on))(function(r){return M(T(an)(r))(function(){return M(T(ln)(n.value0))(function(){return H(d(ke))(function(o){var _={e:n.value0,q:we(o)("next")};return!_.e&&_.q instanceof v&&_.q.value0==="closeWindow"?d(Oe(He)(be)):d(Wn(On(n.value0))(ut(e(r))))})})})});if(n instanceof nn)return M(d(Vt(n.value0)))(function(){return H(We($n))(function(r){return M(T(Re)(k.value))(function(){return H(qt(Pt(r)))(function(o){if(o instanceof Ze)return M(T(Re)(new v(Ue(o.value0))))(function(){return d(Se(Ue(o.value0)))});if(o instanceof ce&&o.value0.status>=200&&o.value0.status<300)return H(d(ke))(function(_){return H(d(Nt))(function(l){return H(d(At(l)))(function(E){return H(d(xe))(function(C){return H(d(St(C)))(function(W){var f=we(_)("next");if(f instanceof v&&f.value0==="closeWindow")return d(Oe(He)(be));if(f instanceof v&&f.value0==="back")return d(function(){var h=me(lt(W)(E));return h?le(E)(C):le(W)(C)}());var m=r.id===0;return m?d(Oe(le(_e(Q.noteR)))(xe)):M(T(zn)(r))(function(){return T(ln)(!1)})})})})})});if(o instanceof ce)return M(T(Re)(new v(o.value0.body)))(function(){return d(Se(o.value0.body))});throw new Error("Failed pattern match at Component.NNote (line 226, column 40 - line 249, column 36): "+[o.constructor.name])})})})});throw new Error("Failed pattern match at Component.NNote (line 189, column 3 - line 189, column 77): "+[n.constructor.name])},de=function(n){var r=function(f){return X(1)(Vn(function(m){return[p,i(m)]})(Y(`
`)(f)))},o=function(f){return Z(f.created)},_=function(f){return s([L($t(n.note.id)),a("note w-100 mw7 pa1 mb2")])([s([a("display")])([s([a("link f5 lh-title")])([i(function(){var m=U(n.note.title);return m?"[no title]":n.note.title}())]),p,function(){return n.note.isMarkdown?s([a("description mt1")])([Gn(Jn)(void 0)(It)(n.note.text)(je)]):s([a("description mt1 mid-gray")])(r(n.note.text))}(),s([a("link f7 dib gray w4")])([ae([ie(D(n.note.created)(j)(o(n.note)))])([i(D("\xA0")(q)(o(n.note)))]),i(" - "),ae([a("gray")])([i(function(){return n.note.shared?"public":"private"}())])])]),Ce(Q.dat.isowner)(function(m){return s([a("edit_links db mt3")])([N([ue(A.value),b(function(h){return new Ve(!0)}),a("edit light-silver hover-blue")])([i("edit\xA0\xA0")]),s([a("delete_link di")])([N([ue(A.value),b(function(h){return new Ge(!0)}),a("delete light-silver hover-blue"+Kt(n.deleteAsk)(" dn"))])([i("delete")]),ae([a("confirm red"+Kt(!n.deleteAsk)(" dn"))])([N([ue(A.value),b(function(h){return new Ge(!1)})])([i("cancel\xA0/\xA0")]),N([ue(A.value),b(function(h){return rn.value}),a("red")])([i("destroy")])])])])})])},l=function(f){return function(m){return tn.create(f(m))}},E=function(f){return oe([a("red")])([i("you killed this note")])},C=function(f){return function(m){return s([a("alert alert-err")])([i(f)])}},W=function(f){return Ct([Gt(nn.create)])([Ce(me(n.apiError))(C(Ye("")(n.apiError))),oe([a("mt2 mb1")])([i("title:")]),y([B(dt.value),a("title w-100 mb1 pt1 edit_form_input"),P("title"),se(n.edit_note.title),Pe(l(Xt.create)),Ut(U(n.edit_note.title))]),p,oe([a("mt2 mb1")])([i("description:")]),ht([L(e(n.edit_note)),a("description w-100 mb1 pt1 edit_form_input"),P("text"),xt(25),se(n.edit_note.text),Pe(l(Yt.create))]),s([a("edit_form_checkboxes mb3")])([y([B(pe.value),a("is-markdown pointer"),L("edit_ismarkdown"),P("ismarkdown"),ye(n.edit_note.isMarkdown),Ne(l(Zt.create))]),i(" "),Le([De("edit_ismarkdown"),a("mr2")])([i("use markdown?")]),p]),s([a("edit_form_checkboxes mb3")])([y([B(pe.value),a("is-markdown pointer"),L("edit_shared"),P("shared"),ye(n.edit_note.shared),Ne(l(en.create))]),i(" "),Le([De("edit_shared"),a("mr2")])([i("public?")]),p]),y([B(ft.value),a("mr1 pv1 ph2 dark-gray ba b--moon-gray bg-near-white pointer rdim"),se("save")]),i(" "),y([B(st.value),a("pv1 ph2 dark-gray ba b--moon-gray bg-near-white pointer rdim"),se("cancel"),b(function(m){return new Ve(!1)})])])};return he(n.destroyed)(E)(w(he(n.edit)(W)(_)))};return re({initialState:w(u(t)),render:de,eval:ne({handleQuery:c.handleQuery,receive:c.receive,initialize:c.initialize,finalize:c.finalize,handleAction:fe})})};var fn=G(ge),dn=at(Lt)(it),mn=V(R)(ge),cn=O(Mt),xr=function(t){return function(e){return Ie(fn(Fe(t))(dn(function(u){return mn(cn(Be(Jt(e))(void 0)(u)))(function(){return Qe})})))}},kr=function(t){return function(e){return Ie(fn(Fe(t))(dn(function(u){return mn(cn(Be(sn(e))(void 0)(u)))(function(){return Qe})})))}};export{kr as renderNote,xr as renderNotes};
//# sourceMappingURL=index.js.map
